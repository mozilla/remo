{% extends "base.html" %}
{% load markup %}

{% block pagetitle %}
Mozilla Reps - Profile of {{ user_profile.display_name }}
{% endblock %}

{% block content %}
<div class="row">
  <div class="six columns">
    <div class="row">
      <div class="one columns pictogram">
        J
      </div>
      <div class="eleven columns">
        <br>
        <h4>
          {{ pageuser.first_name }}
        </h4>
        <h4>
          {{ pageuser.last_name }}
        </h4>
        {% if pageuser == request.user %}
          <span class="grayed">
            (this is you!)
          </span>
        {% else %}
        <br>
        {% endif %}
        {% if user_profile.local_name %}
          <h5 class="grayed">
            {{ user_profile.local_name }}
          </h5>
        {% endif %}
          <h5 class="grayed">
            {{ user_profile.display_name }}
          </h5>
      </div>
    </div>
  </div>
  <div class="six columns">
    <div class="row">
      <div class="one columns pictogram">
        A
      </div>
      <div class="eleven columns">
        <div class="row">
          <div class="four columns profile-image">
            <img id="profiles-view-avatar" src="{{ avatar_url }}">
          </div>
          <div class="eight columns smallmap-profile-container">
            <div id="map" class="smallmap-profile"
                 data-lon="{{ user_profile.lon }}"
                 data-lat="{{ user_profile.lat }}"
                 data-mediaurl="{{ MEDIA_URL}}">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="row">
  <div class="six columns">
    <div class="row">
      {% if user_profile.bio %}
        <div class="one columns pictogram">
          V
        </div>
        <div class="eleven columns">
          <br>
          <p>
            {{ user_profile.bio|restructuredtext }}
          </p>
        </div>
      {% endif %}
    </div>
  </div>
  <div class="six columns">
    <div class="row">
      <div class="one columns pictogram">
        p
      </div>
      <div class="eleven columns">
        <p class="profile-item">
          <span class="white radius label">
            Location
          </span>
          &nbsp;
          <a href="{% url profiles_list_profiles %}{{ user_profile.city }}">
            {{ user_profile.city }}
          </a>
          -
          <a href="{% url profiles_list_profiles %}{{ user_profile.region }}">
            {{ user_profile.region }}
          </a>
          -
          <a href="{% url profiles_list_profiles %}{{ user_profile.country }}">
            {{ user_profile.country }}
          </a>
        </p>
        {% if user_profile.get_age %}
        <p class="profile-item">
          <span class="white radius label">
            Age
          </span>
          &nbsp;{{ user_profile.get_age }}
        </p>
        {% endif %}
        {% if not user_profile.gender == None %}
        <p class="profile-item">
          <span class="white radius label">
            Gender
          </span>
          &nbsp;{{ user_profile.get_gender_display }}
        </p>
        {% endif %}
      </div>
    </div>
    <div class="row">
      <div class="one columns pictogram">
        @
      </div>
      <div class="eleven columns">
        <p class="profile-item">
          <span class="white radius label">
            Personal Mail
          </span>
          &nbsp;{{ user_profile.private_email }}
        </p>
        <p class="profile-item">
          <span class="white radius label">
            Bugzilla Mail
          </span>
          &nbsp;{{ pageuser.email }}
        </p>
        <p class="profile-item">
          <span class="white radius label">
            Mozillians Profile
          </span>
          &nbsp;{{ user_profile.mozillians_profile_url|urlizetrunc:50 }}
        </p>
        <p class="profile-item">
          <span class="white radius label">
            Wiki Profile
          </span>
          &nbsp;{{ user_profile.wiki_profile_url|urlizetrunc:50 }}
        </p>
        {% if mentor %}
          <p class="profile-item">
            <span class="white radius label">
              Mentor
            </span>
            &nbsp;
            <a href="{% url profiles_view_profile mentor.userprofile.display_name %}">
              {{ mentor.get_full_name }}
            </a>
          </p>
        {% endif %}
      </div>
    </div>
    <div class="row">
      {% if user_profile.twitter_account or user_profile.facebook_url or user_profile.diaspora_url or user_profile.linkedin_url %}
        <div class="one columns pictogram">
          T
        </div>
        <div class="eleven columns">
        {% if user_profile.twitter_account %}
          <p class="profile-item">
            <span class="white radius label">
              Twitter handle
            </span>
            &nbsp;
            <a href="http://twitter.com/#!/{{ user_profile.twitter_account }}">
              @{{ user_profile.twitter_account }}
            </a>
          </p>
        {% endif %}
        {% if user_profile.facebook_url %}
          <p class="profile-item">
            <span class="white radius label">
              Facebook profile
            </span>
            &nbsp;{{ user_profile.facebook_url|urlizetrunc:50 }}
          </p>
        {% endif %}
        {% if user_profile.diaspora_url %}
          <p class="profile-item">
            <span class="white radius label">
              Diaspora profile
            </span>
            &nbsp;{{ user_profile.diaspora_url|urlizetrunc:50 }}
          </p>
        {% endif %}
        {% if user_profile.linkedin_url %}
          <p class="profile-item">
            <span class="white radius label">
              LinkedIn profile
            </span>
            &nbsp;{{ user_profile.linkedin_url|urlizetrunc:50 }}
          </p>
        {% endif %}
        </div>
      {% endif %}
    </div>
    <div class="row">
      <div class="one columns pictogram">
        b
      </div>
      <div class="eleven columns">
        {% if user_profile.jabber_id %}
          <p class="profile-item">
            <span class="white radius label">
              Jabber ID
            </span>
            &nbsp;{{ user_profile.jabber_id }}
          </p>
        {% endif %}
        <p class="profile-item">
          <span class="white radius label">
            IRC nickname
          </span>
          &nbsp;{{ user_profile.irc_name }}
        </p>
        {% if user_profile.irc_channels %}
          <p class="profile-item">
            <span class="white radius label">
              IRC channels
            </span>
            &nbsp;{{ user_profile.irc_channels }}
          </p>
        {% endif %}
      </div>
    </div>
    <div class="row">
      {% if user_profile.personal_website_url or user_profile.personal_blog_feed %}
        <div class="one columns pictogram">
          w
        </div>
        <div class="eleven columns">
          {% if user_profile.personal_website_url %}
            <p class="profile-item">
              <span class="white radius label">
                Personal Site
              </span>
              &nbsp;{{ user_profile.personal_website_url|urlizetrunc:50 }}
            </p>
          {% endif %}
          {% if user_profile.personal_blog_feed %}
            <p class="profile-item">
              <span class="white radius label">
                Feed for Reps Planet
              </span>
              &nbsp;{{ user_profile.personal_blog_feed|urlizetrunc:50 }}
            </p>
          {% endif %}
        </div>
      {% endif %}
    </div>
    {% if added_by and perms.profiles.can_edit_profile %}
      <div class="row">
        <div class="one columns pictogram">
          l
        </div>
        <div class="eleven columns">
          <p class="profile-item">
            <span class="white radius label">
              Added by
            </span>
            &nbsp;
            <a href="{% url profiles_view_profile added_by.userprofile.display_name %}">
              {{ added_by.userprofile.display_name }}
            </a>
          </p>
        </div>
      </div>
    {% endif %}
  </div>
</div>
{% if user == pageuser or perms.profiles.can_edit_profiles %}
  <div class="row">
    <div id="save-profile" class="twelve columns align-right">
      <a href="{% url profiles_edit user_profile.display_name %}"
         class="small white button nice radius">Edit profile</a>
    </div>
  </div>
{% endif %}
</div>

<!-- Delete Profile Reveal Modal -->
<div id="delete-profile" class="reveal-modal">
  <a class="close-reveal-modal">&#215;</a>
  <p class="lead">
    Are you sure you want to do that?
  </p>
  <h2>
    Warning!
  </h2>
  <p>
    By pressing the following button you will permanently and irreversibly delete the
    profile of this Rep.
    <p>
      <a href="#" class="large red button nice radius">Delete profile</a>
</div>
{% endblock %}

{% block bottomextra %}
<script type="text/javascript" src="{{ MEDIA_URL }}openlayers/OpenLayers.js"></script>
<script type="text/javascript" src="{{ MEDIA_URL }}js/profiles_view.js"></script>
{% endblock %}
